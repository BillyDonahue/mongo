# -*- mode: python -*-

errorCodesArr = [
    (0, 'OK'),
    (1, 'InternalError'),
    (2, 'BadValue'),
    (3, 'OBSOLETE_DuplicateKey'),
    (4, 'NoSuchKey'),
    (5, 'GraphContainsCycle'),
    (6, 'HostUnreachable'),
    (7, 'HostNotFound'),
    (8, 'UnknownError'),
    (9, 'FailedToParse'),
    (10, 'CannotMutateObject'),
    (11, 'UserNotFound'),
    (12, 'UnsupportedFormat'),
    (13, 'Unauthorized'),
    (14, 'TypeMismatch'),
    (15, 'Overflow'),
    (16, 'InvalidLength'),
    (17, 'ProtocolError'),
    (18, 'AuthenticationFailed'),
    (19, 'CannotReuseObject'),
    (20, 'IllegalOperation'),
    (21, 'EmptyArrayOperation'),
    (22, 'InvalidBSON'),
    (23, 'AlreadyInitialized'),
    (24, 'LockTimeout'),
    (25, 'RemoteValidationError'),
    (26, 'NamespaceNotFound'),
    (27, 'IndexNotFound'),
    (28, 'PathNotViable'),
    (29, 'NonExistentPath'),
    (30, 'InvalidPath'),
    (31, 'RoleNotFound'),
    (32, 'RolesNotRelated'),
    (33, 'PrivilegeNotFound'),
    (34, 'CannotBackfillArray'),
    (35, 'UserModificationFailed'),
    (36, 'RemoteChangeDetected'),
    (37, 'FileRenameFailed'),
    (38, 'FileNotOpen'),
    (39, 'FileStreamFailed'),
    (40, 'ConflictingUpdateOperators'),
    (41, 'FileAlreadyOpen'),
    (42, 'LogWriteFailed'),
    (43, 'CursorNotFound'),
    (45, 'UserDataInconsistent'),
    (46, 'LockBusy'),
    (47, 'NoMatchingDocument'),
    (48, 'NamespaceExists'),
    (49, 'InvalidRoleModification'),
    (50, 'MaxTimeMSExpired'),
    (51, 'ManualInterventionRequired'),
    (52, 'DollarPrefixedFieldName'),
    (53, 'InvalidIdField'),
    (54, 'NotSingleValueField'),
    (55, 'InvalidDBRef'),
    (56, 'EmptyFieldName'),
    (57, 'DottedFieldName'),
    (58, 'RoleModificationFailed'),
    (59, 'CommandNotFound'),
    (60, 'OBSOLETE_DatabaseNotFound'),
    (61, 'ShardKeyNotFound'),
    (62, 'OplogOperationUnsupported'),
    (63, 'StaleShardVersion'),
    (64, 'WriteConcernFailed'),
    (65, 'MultipleErrorsOccurred'),
    (66, 'ImmutableField'),
    (67, 'CannotCreateIndex'),
    (68, 'IndexAlreadyExists'),
    (69, 'AuthSchemaIncompatible'),
    (70, 'ShardNotFound'),
    (71, 'ReplicaSetNotFound'),
    (72, 'InvalidOptions'),
    (73, 'InvalidNamespace'),
    (74, 'NodeNotFound'),
    (75, 'WriteConcernLegacyOK'),
    (76, 'NoReplicationEnabled'),
    (77, 'OperationIncomplete'),
    (78, 'CommandResultSchemaViolation'),
    (79, 'UnknownReplWriteConcern'),
    (80, 'RoleDataInconsistent'),
    (81, 'NoMatchParseContext'),
    (82, 'NoProgressMade'),
    (83, 'RemoteResultsUnavailable'),
    (84, 'DuplicateKeyValue'),
    (85, 'IndexOptionsConflict'),
    (86, 'IndexKeySpecsConflict'),
    (87, 'CannotSplit'),
    (88, 'SplitFailed_OBSOLETE'),
    (89, 'NetworkTimeout'),
    (90, 'CallbackCanceled'),
    (91, 'ShutdownInProgress'),
    (92, 'SecondaryAheadOfPrimary'),
    (93, 'InvalidReplicaSetConfig'),
    (94, 'NotYetInitialized'),
    (95, 'NotSecondary'),
    (96, 'OperationFailed'),
    (97, 'NoProjectionFound'),
    (98, 'DBPathInUse'),
    (100, 'UnsatisfiableWriteConcern'),
    (101, 'OutdatedClient'),
    (102, 'IncompatibleAuditMetadata'),
    (103, 'NewReplicaSetConfigurationIncompatible'),
    (104, 'NodeNotElectable'),
    (105, 'IncompatibleShardingMetadata'),
    (106, 'DistributedClockSkewed'),
    (107, 'LockFailed'),
    (108, 'InconsistentReplicaSetNames'),
    (109, 'ConfigurationInProgress'),
    (110, 'CannotInitializeNodeWithData'),
    (111, 'NotExactValueField'),
    (112, 'WriteConflict'),
    (113, 'InitialSyncFailure'),
    (114, 'InitialSyncOplogSourceMissing'),
    (115, 'CommandNotSupported'),
    (116, 'DocTooLargeForCapped'),
    (117, 'ConflictingOperationInProgress'),
    (118, 'NamespaceNotSharded'),
    (119, 'InvalidSyncSource'),
    (120, 'OplogStartMissing'),
    (121, 'DocumentValidationFailure'), # Only for the document validator on collections.
    (122, 'OBSOLETE_ReadAfterOptimeTimeout'),
    (123, 'NotAReplicaSet'),
    (124, 'IncompatibleElectionProtocol'),
    (125, 'CommandFailed'),
    (126, 'RPCProtocolNegotiationFailed'),
    (127, 'UnrecoverableRollbackError'),
    (128, 'LockNotFound'),
    (129, 'LockStateChangeFailed'),
    (130, 'SymbolNotFound'),
    #(131, 'RLPInitializationFailed'), # Removed in 4.2
    (132, 'OBSOLETE_ConfigServersInconsistent'),
    (133, 'FailedToSatisfyReadPreference'),
    (134, 'ReadConcernMajorityNotAvailableYet'),
    (135, 'StaleTerm'),
    (136, 'CappedPositionLost'),
    (137, 'IncompatibleShardingConfigVersion'),
    (138, 'RemoteOplogStale'),
    (139, 'JSInterpreterFailure'),
    (140, 'InvalidSSLConfiguration'),
    (141, 'SSLHandshakeFailed'),
    (142, 'JSUncatchableError'),
    (143, 'CursorInUse'),
    (144, 'IncompatibleCatalogManager'),
    (145, 'PooledConnectionsDropped'),
    (146, 'ExceededMemoryLimit'),
    (147, 'ZLibError'),
    (148, 'ReadConcernMajorityNotEnabled'),
    (149, 'NoConfigMaster'),
    (150, 'StaleEpoch'),
    (151, 'OperationCannotBeBatched'),
    (152, 'OplogOutOfOrder'),
    (153, 'ChunkTooBig'),
    (154, 'InconsistentShardIdentity'),
    (155, 'CannotApplyOplogWhilePrimary'),
    (156, 'OBSOLETE_NeedsDocumentMove'),
    (157, 'CanRepairToDowngrade'),
    (158, 'MustUpgrade'),
    (159, 'DurationOverflow'),
    (160, 'MaxStalenessOutOfRange'),
    (161, 'IncompatibleCollationVersion'),
    (162, 'CollectionIsEmpty'),
    (163, 'ZoneStillInUse'),
    (164, 'InitialSyncActive'),
    (165, 'ViewDepthLimitExceeded'),
    (166, 'CommandNotSupportedOnView'),
    (167, 'OptionNotSupportedOnView'),
    (168, 'InvalidPipelineOperator'),
    (169, 'CommandOnShardedViewNotSupportedOnMongod', {'extra':'ResolvedView'}),
    (170, 'TooManyMatchingDocuments'),
    (171, 'CannotIndexParallelArrays'),
    (172, 'TransportSessionClosed'),
    (173, 'TransportSessionNotFound'),
    (174, 'TransportSessionUnknown'),
    (175, 'QueryPlanKilled'),
    (176, 'FileOpenFailed'),
    (177, 'ZoneNotFound'),
    (178, 'RangeOverlapConflict'),
    (179, 'WindowsPdhError'),
    (180, 'BadPerfCounterPath'),
    (181, 'AmbiguousIndexKeyPattern'),
    (182, 'InvalidViewDefinition'),
    (183, 'ClientMetadataMissingField'),
    (184, 'ClientMetadataAppNameTooLarge'),
    (185, 'ClientMetadataDocumentTooLarge'),
    (186, 'ClientMetadataCannotBeMutated'),
    (187, 'LinearizableReadConcernError'),
    (188, 'IncompatibleServerVersion'),
    (189, 'PrimarySteppedDown'),
    (190, 'MasterSlaveConnectionFailure'),
    (191, 'OBSOLETE_BalancerLostDistributedLock'),
    (192, 'FailPointEnabled'),
    (193, 'NoShardingEnabled'),
    (194, 'BalancerInterrupted'),
    (195, 'ViewPipelineMaxSizeExceeded'),
    (197, 'InvalidIndexSpecificationOption'),
    (198, 'OBSOLETE_ReceivedOpReplyMessage'),
    (199, 'ReplicaSetMonitorRemoved'),
    (200, 'ChunkRangeCleanupPending'),
    (201, 'CannotBuildIndexKeys'),
    (202, 'NetworkInterfaceExceededTimeLimit'),
    (203, 'ShardingStateNotInitialized'),
    (204, 'TimeProofMismatch'),
    (205, 'ClusterTimeFailsRateLimiter'),
    (206, 'NoSuchSession'),
    (207, 'InvalidUUID'),
    (208, 'TooManyLocks'),
    (209, 'StaleClusterTime'),
    (210, 'CannotVerifyAndSignLogicalTime'),
    (211, 'KeyNotFound'),
    (212, 'IncompatibleRollbackAlgorithm'),
    (213, 'DuplicateSession'),
    (214, 'AuthenticationRestrictionUnmet'),
    (215, 'DatabaseDropPending'),
    (216, 'ElectionInProgress'),
    (217, 'IncompleteTransactionHistory'),
    (218, 'UpdateOperationFailed'),
    (219, 'FTDCPathNotSet'),
    (220, 'FTDCPathAlreadySet'),
    (221, 'IndexModified'),
    (222, 'CloseChangeStream'),
    (223, 'IllegalOpMsgFlag'),
    (224, 'QueryFeatureNotAllowed'),
    (225, 'TransactionTooOld'),
    (226, 'AtomicityFailure'),
    (227, 'CannotImplicitlyCreateCollection', {'extra':'CannotImplicitlyCreateCollectionInfo'}),
    (228, 'SessionTransferIncomplete'),
    (229, 'MustDowngrade'),
    (230, 'DNSHostNotFound'),
    (231, 'DNSProtocolError'),
    (232, 'MaxSubPipelineDepthExceeded'),
    (233, 'TooManyDocumentSequences'),
    (234, 'RetryChangeStream'),

    # this function or module is not available on this platform or configuration
    (235, 'InternalErrorNotSupported'),

    (236, 'ForTestingErrorExtraInfo', {'extra':'ErrorExtraInfoExample'}),
    (237, 'CursorKilled'),
    (238, 'NotImplemented'),
    (239, 'SnapshotTooOld'),
    (240, 'DNSRecordTypeMismatch'),
    (241, 'ConversionFailure'),
    (242, 'CannotCreateCollection'),
    (243, 'IncompatibleWithUpgradedServer'),
    (244, 'NOT_YET_AVAILABLE_TransactionAborted'),
    (245, 'BrokenPromise'),
    (246, 'SnapshotUnavailable'),
    (247, 'ProducerConsumerQueueBatchTooLarge'),
    (248, 'ProducerConsumerQueueEndClosed'),
    (249, 'StaleDbVersion', {'extra':'StaleDbRoutingVersion'}),
    (250, 'StaleChunkHistory'),
    (251, 'NoSuchTransaction'),
    (252, 'ReentrancyNotAllowed'),
    (253, 'FreeMonHttpInFlight'),
    (254, 'FreeMonHttpTemporaryFailure'),
    (255, 'FreeMonHttpPermanentFailure'),
    (256, 'TransactionCommitted'),
    (257, 'TransactionTooLarge'),
    (258, 'UnknownFeatureCompatibilityVersion'),
    (259, 'KeyedExecutorRetry'),
    (260, 'InvalidResumeToken'),
    (261, 'TooManyLogicalSessions'),
    (262, 'ExceededTimeLimit'),
    (263, 'OperationNotSupportedInTransaction'),
    (264, 'TooManyFilesOpen'),
    (265, 'OrphanedRangeCleanUpFailed'),
    (266, 'FailPointSetFailed'),
    (267, 'PreparedTransactionInProgress'),
    (268, 'CannotBackup'),
    (269, 'DataModifiedByRepair'),
    (270, 'RepairedReplicaSetNode'),
    (271, 'JSInterpreterFailureWithStack', {'extra':'JSExceptionInfo'}),
    (272, 'MigrationConflict'),
    (273, 'ProducerConsumerQueueProducerQueueDepthExceeded'),
    (274, 'ProducerConsumerQueueConsumed'),
    (275, 'ExchangePassthrough'), # For exchange execution in aggregation. Do not reuse.
    (276, 'IndexBuildAborted'),
    (277, 'AlarmAlreadyFulfilled'),
    (278, 'UnsatisfiableCommitQuorum'),
    (279, 'ClientDisconnect'),
    (280, 'ChangeStreamFatalError'),

    # The two codes below are for internal use only and must never be returned in a network response
    (281, 'TransactionCoordinatorSteppingDown'), # Gets converted to InterruptedDueToReplStateChange
    (282, 'TransactionCoordinatorReachedAbortDecision'),

    (283, 'WouldChangeOwningShard', {'extra':'WouldChangeOwningShardInfo'}),
    (284, 'ForTestingErrorExtraInfoWithExtraInfoInNamespace', {'extra':'nested::twice::NestedErrorExtraInfoExample'}),
    (285, 'IndexBuildAlreadyInProgress'),
    (286, 'ChangeStreamHistoryLost'),
    # The code below is for internal use only and must never be returned in a network response
    (287, 'TransactionCoordinatorDeadlineTaskCanceled'),
    (288, 'ChecksumMismatch'),
    # Internal only code used by WaitForMajorityService.
    (289, 'WaitForMajorityServiceEarlierOpTimeAvailable'),

# Error codes 4000-8999 are reserved.

    # Non-sequential error codes (for compatibility only)
    (9001, 'SocketException'),
    (9996, 'OBSOLETE_RecvStaleConfig'),
    (10003, 'CannotGrowDocumentInCappedNamespace'),
    (10107, 'NotMaster'),
    (10334, 'BSONObjectTooLarge'),
    (11000, 'DuplicateKey', {'extra':'DuplicateKeyErrorInfo'}),
    (11600, 'InterruptedAtShutdown'),
    (11601, 'Interrupted'),
    (11602, 'InterruptedDueToReplStateChange'),
    (12586, 'BackgroundOperationInProgressForDatabase'),
    (12587, 'BackgroundOperationInProgressForNamespace'),
    (13104, 'OBSOLETE_PrepareConfigsFailed'),
    (13113, 'MergeStageNoMatchingDocument'),
    (13297, 'DatabaseDifferCase'),
    (13334, 'ShardKeyTooBig'),
    (13388, 'StaleConfig', {'extra':'StaleConfigInfo'}),
    (13435, 'NotMasterNoSlaveOk'),
    (13436, 'NotMasterOrSecondary'),
    (14031, 'OutOfDiskSpace'),
    (17280, 'OSBELETE_KeyTooLong'),
]

# Group related errors into classes, can be checked against ErrorCodes::isXXXClassName methods.
errorClasses = {
    'NetworkError': [
        'HostUnreachable',
        'HostNotFound',
        'NetworkTimeout',
        'SocketException',
    ],

    'Interruption': [
        'Interrupted',
        'InterruptedAtShutdown',
        'InterruptedDueToReplStateChange',
        'ExceededTimeLimit',
        'MaxTimeMSExpired',
        'CursorKilled',
        'LockTimeout',
        'ClientDisconnect',
    ],

    # isNotMasterError() includes all codes that indicate that the node that received the request was
    # not master at some point during command processing, regardless of whether some write may have
    # happened. If you care about whether a write could have happened, check for individual codes.
    'NotMasterError': [
        'NotMaster',
        'NotMasterNoSlaveOk',
        'NotMasterOrSecondary',
        'InterruptedDueToReplStateChange',
        'PrimarySteppedDown',
    ],

    'StaleShardVersionError': [
        'StaleConfig',
        'StaleShardVersion',
        'StaleEpoch',
    ],

    'NeedRetargettingError': [
        'StaleConfig',
        'StaleShardVersion',
        'StaleEpoch',
        'CannotImplicitlyCreateCollection',
    ],

    'WriteConcernError': [
        'WriteConcernFailed',
        'WriteConcernLegacyOK',
        'UnknownReplWriteConcern',
        'UnsatisfiableWriteConcern',
    ],

    'ShutdownError': [
        'ShutdownInProgress',
        'InterruptedAtShutdown',
    ],

    # isCancelationError() includes all codes that, when passed to a function as its parameter,
    # indicates that it cannot be executed as normal and must abort its intended work.
    'CancelationError': [
        'ShutdownInProgress',
        'InterruptedAtShutdown',
        'CallbackCanceled',
    ],

    'ConnectionFatalMessageParseError': [
        'IllegalOpMsgFlag',
        'TooManyDocumentSequences',
        'ChecksumMismatch',
    ],

    'ExceededTimeLimitError': [
        'ExceededTimeLimit',
        'MaxTimeMSExpired',
        'NetworkInterfaceExceededTimeLimit',
    ],

    'SnapshotError': [
        'SnapshotTooOld',
        'SnapshotUnavailable',
        'StaleChunkHistory',
        'MigrationConflict',
    ],

    'VoteAbortError': [
        'NoSuchTransaction',
        'ReadConcernMajorityNotEnabled',
        'TransactionTooOld',
    ],

    'NonResumableChangeStreamError': [
        'ChangeStreamFatalError',
        'ChangeStreamHistoryLost',
    ],
}

for ec in errorCodesArr:
    kw = {}
    if len(ec) > 2:
        kw = ec[2]
    error_code(ec[1], ec[0], **kw)

for className, classCodes in errorClasses.items():
    error_class(className, classCodes)
